<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ji.hs.fire.act.mpr.ActTrdMapper">
<!-- 계좌 정보 목록 조회 -->
	<select id="selectAll" resultType="ji.hs.fire.act.vo.ActTrdVO">
		SELECT TRD_SEQ
			 , ACT_SEQ
			 , REL_TRD_SEQ
			 , TRD_CD
			 , (SELECT CD_NM FROM BC_CD_DT X WHERE A.TRD_CD = X.CD AND X.CD_COL = 'TRD_CD') AS TRD_CD_NM
			 , AMT
			 , ITM_CD
			 , (SELECT ITM_NM FROM KX_ITM_MT X WHERE A.ITM_CD = X.ITM_CD) AS ITM_NM
			 , QTY
			 , NOTE
			 , DATE_FORMAT(TRD_DT,'%Y/%m/%d %H:%i') AS TRD_DT
			 , DATE_FORMAT(ED_DT,'%Y/%m/%d %H:%i') AS ED_DT
		  FROM AC_DT A
		 WHERE ACT_SEQ = #{actSeq}
		 LIMIT #{limit}
		OFFSET #{offset}
	</select>
	
<!-- 계좌 정보 건수 조회 -->
	<select id="selectCount" resultType="Integer" parameterType="ji.hs.fire.act.vo.ActTrdVO">
		SELECT COUNT(*) AS CNT
		  FROM AC_DT A
		 WHERE ACT_SEQ = #{actSeq}
	</select>
	
<!-- 계좌 정보 입력 -->
	<insert id="insert" parameterType="ji.hs.fire.act.vo.ActTrdVO" flushCache="true">
	<![CDATA[
		INSERT INTO AC_DT (
			   TRD_SEQ
			 , ACT_SEQ
			 , REL_TRD_SEQ
			 , TRD_CD
			 , AMT
			 , ITM_CD
			 , QTY
			 , NOTE
			 , TRD_DT
			 , ED_DT
			 ) VALUES (
			   #{trdSeq}
			 , #{actSeq}
			 , #{relTrdSeq}
			 , #{trdCd}
			 , #{amt}
			 , #{itmCd}
			 , #{qty}
			 , #{note}
			 , #{trdDt}
			 , #{edDt}
			 )
	]]>
	</insert>
</mapper>